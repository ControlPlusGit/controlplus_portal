<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>as3993 Firmware: as3993_public.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">as3993 Firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3b1dcce1203a4246271d0209b54aa6ca.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a>  </div>
  <div class="headertitle">
<div class="title">as3993_public.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="global_8h_source.html">global.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="errno__as3993_8h_source.html">errno_as3993.h</a>&quot;</code><br/>
</div>
<p><a href="as3993__public_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_tag_info__.html">TagInfo_</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24e956eab72b3e331706283669924255"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_tag_info__.html">TagInfo_</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#a24e956eab72b3e331706283669924255">Tag</a></td></tr>
<tr class="separator:a24e956eab72b3e331706283669924255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac2da701b417c8883b22fe3b6c907ea3"><td class="memItemLeft" align="right" valign="top">u16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#aac2da701b417c8883b22fe3b6c907ea3">as3993Initialize</a> (u32 baseFreq)</td></tr>
<tr class="separator:aac2da701b417c8883b22fe3b6c907ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b007e3bcab995d9917ec706882e26fb"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#a4b007e3bcab995d9917ec706882e26fb">as3993ReadChipVersion</a> (void)</td></tr>
<tr class="separator:a4b007e3bcab995d9917ec706882e26fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a226f1f06151c71e2fe88240ffe6d33ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#a226f1f06151c71e2fe88240ffe6d33ba">as3993SetBaseFrequency</a> (u8 regs, u32 frequency)</td></tr>
<tr class="separator:a226f1f06151c71e2fe88240ffe6d33ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43c5d2a68a4c3ddc654ef3eec569dbc1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#a43c5d2a68a4c3ddc654ef3eec569dbc1">as3993AntennaPower</a> (u8 on)</td></tr>
<tr class="separator:a43c5d2a68a4c3ddc654ef3eec569dbc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3d7d8b890567b8a2e742e4f36b7d7c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#ac3d7d8b890567b8a2e742e4f36b7d7c3">as3993GetRSSI</a> (u16 num_of_ms_to_scan, u8 *rawIQ, s8 *dBm)</td></tr>
<tr class="separator:ac3d7d8b890567b8a2e742e4f36b7d7c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f39cc67020ca38e30dabfdcbd910f8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#a7f39cc67020ca38e30dabfdcbd910f8f">as3993SaveSensitivity</a> ()</td></tr>
<tr class="separator:a7f39cc67020ca38e30dabfdcbd910f8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87abb86567a73e8714fb73c36ccf2887"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#a87abb86567a73e8714fb73c36ccf2887">as3993RestoreSensitivity</a> ()</td></tr>
<tr class="separator:a87abb86567a73e8714fb73c36ccf2887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07a889d9ce2aff229e7fecbf4666fb59"><td class="memItemLeft" align="right" valign="top">s8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#a07a889d9ce2aff229e7fecbf4666fb59">as3993SetSensitivity</a> (s8 minimumSignal)</td></tr>
<tr class="separator:a07a889d9ce2aff229e7fecbf4666fb59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae07cbf5b35543f504c6edcf796569a7a"><td class="memItemLeft" align="right" valign="top">s8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#ae07cbf5b35543f504c6edcf796569a7a">as3993GetSensitivity</a> (void)</td></tr>
<tr class="separator:ae07cbf5b35543f504c6edcf796569a7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a473d9c2f0ca8e267a4101c3310b1bd71"><td class="memItemLeft" align="right" valign="top">u16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#a473d9c2f0ca8e267a4101c3310b1bd71">as3993GetReflectedPower</a> (void)</td></tr>
<tr class="separator:a473d9c2f0ca8e267a4101c3310b1bd71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa074fdbf977867b8773f94eb603c5a8"><td class="memItemLeft" align="right" valign="top">u16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#aaa074fdbf977867b8773f94eb603c5a8">as3993GetReflectedPowerNoiseLevel</a> (void)</td></tr>
<tr class="separator:aaa074fdbf977867b8773f94eb603c5a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade4d2a68828824ce84d1f457179b58a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#ade4d2a68828824ce84d1f457179b58a9">as3993Reset</a> (void)</td></tr>
<tr class="separator:ade4d2a68828824ce84d1f457179b58a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbe6cfece7e903323170f7ac097ea4fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#adbe6cfece7e903323170f7ac097ea4fa">as3993ResetDoNotPreserveRegisters</a> (void)</td></tr>
<tr class="separator:adbe6cfece7e903323170f7ac097ea4fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a004aeaef17a71f351c37874ead54b521"><td class="memItemLeft" align="right" valign="top">s8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#a004aeaef17a71f351c37874ead54b521">as3993TxRxGen2Bytes</a> (u8 cmd, u8 *txbuf, u16 txbits, u8 *rxbuf, u16 *rxbits, u8 norestime, u8 followCmd, u8 waitTxIrq)</td></tr>
<tr class="separator:a004aeaef17a71f351c37874ead54b521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ffd6d348faac98d79063cfb4d96c042"><td class="memItemLeft" align="right" valign="top">s8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#a9ffd6d348faac98d79063cfb4d96c042">as3980HandleResponseWithHeaderBit</a> (s8 ret, u8 *destbuf, u16 rxbits, u8 const *handle)</td></tr>
<tr class="separator:a9ffd6d348faac98d79063cfb4d96c042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dffce8736280c83c026207c9ac36fb1"><td class="memItemLeft" align="right" valign="top">s8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="as3993__public_8h.html#a5dffce8736280c83c026207c9ac36fb1">as3993GetADC</a> (void)</td></tr>
<tr class="separator:a5dffce8736280c83c026207c9ac36fb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Declaration of public functions provided by the AS3993 series chips. </p>
<dl class="section author"><dt>Author</dt><dd>U.Herrmann ( based on work by E.Grubmueller </dd>
<dd>
T. Luecker (Substitute) </dd>
<dd>
Bernhard Breinbauer <pre class="fragment">Declares functions provided by the AS3993 series chips. All higher level
and protocol work is contained in gen2.h and iso6b.h. Register access is 
performed using as3993.h.</pre></dd></dl>

<p>Definition in file <a class="el" href="as3993__public_8h_source.html">as3993_public.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a24e956eab72b3e331706283669924255"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_tag_info__.html">TagInfo_</a> <a class="el" href="as3993__public_8h.html#a24e956eab72b3e331706283669924255">Tag</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Type definition struct: <a class="el" href="struct_tag_info__.html">TagInfo_</a> is named Tag </p>

<p>Definition at line <a class="el" href="as3993__public_8h_source.html#l00078">78</a> of file <a class="el" href="as3993__public_8h_source.html">as3993_public.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a9ffd6d348faac98d79063cfb4d96c042"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">s8 as3980HandleResponseWithHeaderBit </td>
          <td>(</td>
          <td class="paramtype">s8&#160;</td>
          <td class="paramname"><em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>destbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>rxbits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 const *&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function handles the rx-ed data for an command expecting a header bit. On AS3980 we cannnot use the built in TRANSMCRCEHEADER command because the header bit interrupt is hidden by the 2nd byte interrupt, which cannot be disabled. Instead we use the the command TRANSMCRC and handle the header bit in this function.<br/>
 If a header bit is set the function will return ERR_CHIP_HEADER. <br/>
 The content of the buffer will be shifted by 1 bit to remove the header bit.<br/>
 As this function might ignore potential CRC errors, it checks if the received data contains a the same handle as the handle parameter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ret</td><td>The return value of as399xTxRxGen2Bytes after sending a access command with TRANSMCRC </td></tr>
    <tr><td class="paramname">destbuf</td><td>The received data. Will be shifted by 1 bit. </td></tr>
    <tr><td class="paramname">rxbits</td><td>Number of received data bits. </td></tr>
    <tr><td class="paramname">handle</td><td>Handle which should be inside the received data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the corrected error code. </dd></dl>

</div>
</div>
<a class="anchor" id="a43c5d2a68a4c3ddc654ef3eec569dbc1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void as3993AntennaPower </td>
          <td>(</td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>on</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function turns the antenna power on or off. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">on</td><td>boolean to value to turn it on (1) or off (0). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="as3993_8c_source.html#l00880">880</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5dffce8736280c83c026207c9ac36fb1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">s8 as3993GetADC </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This functions performs an ADC conversion and returns the signed result in machine coding </p>

<p>Definition at line <a class="el" href="as3993_8c_source.html#l01122">1122</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
<a class="anchor" id="a473d9c2f0ca8e267a4101c3310b1bd71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u16 as3993GetReflectedPower </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets the values for the reflected power. For measuring the antenna will be switched on, a measurement performed and the antenna if necessary turned back off. The two measured 8-bit values are returned as one 16-bit value, the lower byte containing receiver-A (I) value, the higher byte containing receiver-B (Q) value. The two values are signed values and will be converted from sign magnitude representation to natural. Note: To get a more accurate result the I and Q values of <a class="el" href="as3993_8c.html#aaa074fdbf977867b8773f94eb603c5a8">as3993GetReflectedPowerNoiseLevel()</a> should be subtracted from the result of <a class="el" href="as3993_8c.html#a473d9c2f0ca8e267a4101c3310b1bd71">as3993GetReflectedPower()</a> </p>

<p>Definition at line <a class="el" href="as3993_8c_source.html#l01132">1132</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
<a class="anchor" id="aaa074fdbf977867b8773f94eb603c5a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u16 as3993GetReflectedPowerNoiseLevel </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function measures and returns the noise level of the reflected power measurement of the active antenna. The returned value is of type u16 and contains the 8 bit I and Q values of the reflected power. The I value is located in the lower 8 bits, the Q value in the upper 8 bits. <br/>
 See <a class="el" href="as3993_8c.html#a473d9c2f0ca8e267a4101c3310b1bd71">as3993GetReflectedPower()</a> fore more info. </p>

<p>Definition at line <a class="el" href="as3993_8c_source.html#l01159">1159</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac3d7d8b890567b8a2e742e4f36b7d7c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void as3993GetRSSI </td>
          <td>(</td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>num_of_ms_to_scan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>rawIQ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">s8 *&#160;</td>
          <td class="paramname"><em>dBm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets the RSSI (ReceivedSignalStrengthIndicator) of the environment in dBm. For measuring the antenna will be switched off, int the time num_of_ms_to_scan measurements performed and the antenna if necessary turned back on.</p>
<p>The returned value is the highest RSSI value expressed in dBm. -128 stands for no signal.</p>
<p>Use this function to implement LBT (Listen Before Talk) at least for European based readers. Use like this </p>
<div class="fragment"><div class="line"><a class="code" href="as3993_8c.html#a226f1f06151c71e2fe88240ffe6d33ba">as3993SetBaseFrequency</a>( f + 100);</div>
<div class="line"><a class="code" href="as3993_8c.html#a7f39cc67020ca38e30dabfdcbd910f8f">as3993SaveSensitivity</a>();</div>
<div class="line"><a class="code" href="as3993_8c.html#a07a889d9ce2aff229e7fecbf4666fb59">as3993SetSensitivity</a>(-50);</div>
<div class="line"><a class="code" href="as3993_8c.html#ac3d7d8b890567b8a2e742e4f36b7d7c3">as3993GetRSSI</a>(10,&amp;iq,&amp;dBm)</div>
<div class="line"><a class="code" href="as3993_8c.html#a87abb86567a73e8714fb73c36ccf2887">as3993RestoreSensitivity</a>();</div>
<div class="line">if (dBm &lt; -40) { </div>
<div class="line">   <span class="comment">//use frequency f for operation</span></div>
<div class="line">}<span class="keywordflow">else</span>{</div>
<div class="line">   <span class="comment">// try to find another freqency</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="as3993_8c_source.html#l01049">1049</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae07cbf5b35543f504c6edcf796569a7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">s8 as3993GetSensitivity </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets the current rx sensitivity level. </p>

<p>Definition at line <a class="el" href="as3993_8c_source.html#l00947">947</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
<a class="anchor" id="aac2da701b417c8883b22fe3b6c907ea3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u16 as3993Initialize </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>baseFreq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function initialises the AS3993. A return value greater 0 indicates an error.<br/>
</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">baseFreq</td><td>the base frequency to set at initialization time, may be changed later on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code </dd>
<dd>
0 : if everything went o.k. </dd>
<dd>
1 : writing + reading SPI failed. </dd>
<dd>
2 : Reset via EN low + high failed. </dd>
<dd>
3 : IRQ line failed. </dd>
<dd>
4 : Crystal not stable (Bit0 in AGC and Internal Status register 0x2A) </dd>
<dd>
5 : PLL not locked (Bits1 in AGC and Internal Status register 0x2A) </dd></dl>

<p>Definition at line <a class="el" href="as3993_8c_source.html#l00129">129</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4b007e3bcab995d9917ec706882e26fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 as3993ReadChipVersion </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function reads the version register of the AS3993 and returns the value. <br/>
 </p>
<dl class="section return"><dt>Returns</dt><dd>Returns the value of the AS3993 version register. </dd></dl>

<p>Definition at line <a class="el" href="as3993_8c_source.html#l00434">434</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
<a class="anchor" id="ade4d2a68828824ce84d1f457179b58a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void as3993Reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function reads in the current register settings (configuration only), performs a reset by driving the enable line first low, then high and then writes back the register values. </p>

<p>Definition at line <a class="el" href="as3993_8c_source.html#l00794">794</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
<a class="anchor" id="adbe6cfece7e903323170f7ac097ea4fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void as3993ResetDoNotPreserveRegisters </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function performs a reset by driving the enable line first low, then high. </p>

<p>Definition at line <a class="el" href="as3993_8c_source.html#l00801">801</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
<a class="anchor" id="a87abb86567a73e8714fb73c36ccf2887"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void as3993RestoreSensitivity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function restores the sensitivity previousley saved using <a class="el" href="as3993_8c.html#a7f39cc67020ca38e30dabfdcbd910f8f">as3993SaveSensitivity()</a>. </p>

<p>Definition at line <a class="el" href="as3993_8c_source.html#l00942">942</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7f39cc67020ca38e30dabfdcbd910f8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void as3993SaveSensitivity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function stores the current sensitivity registers. After that as3993SetSensitivity can be called to change sensitivty for subsequent <a class="el" href="as3993_8c.html#ac3d7d8b890567b8a2e742e4f36b7d7c3">as3993GetRSSI()</a> calls. <a class="el" href="as3993_8c.html#a87abb86567a73e8714fb73c36ccf2887">as3993RestoreSensitivity()</a> restores it again. </p>

<p>Definition at line <a class="el" href="as3993_8c_source.html#l00937">937</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
<a class="anchor" id="a226f1f06151c71e2fe88240ffe6d33ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void as3993SetBaseFrequency </td>
          <td>(</td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>regs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>frequency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function sets the frequency in the approbiate register </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">regs</td><td>Which register is being used either AS3993_REG_PLLMAIN or AS3993_REG_PLLAUX </td></tr>
    <tr><td class="paramname">frequency</td><td>frequency in kHz </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="as3993_8c_source.html#l00636">636</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
<a class="anchor" id="a07a889d9ce2aff229e7fecbf4666fb59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">s8 as3993SetSensitivity </td>
          <td>(</td>
          <td class="paramtype">s8&#160;</td>
          <td class="paramname"><em>minimumSignal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function tries to set the sensitivity to a level to allow detection of signals using <a class="el" href="as3993_8c.html#ac3d7d8b890567b8a2e742e4f36b7d7c3">as3993GetRSSI()</a> with a level higher than miniumSignal(dBm). </p>
<dl class="section return"><dt>Returns</dt><dd>the level offset. Sensitivity was set to minimumSignal - (returned_val). negative values mean the sensitivity could not be reached. </dd></dl>

<p>Definition at line <a class="el" href="as3993_8c_source.html#l00991">991</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
<a class="anchor" id="a004aeaef17a71f351c37874ead54b521"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">s8 as3993TxRxGen2Bytes </td>
          <td>(</td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>txbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>txbits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>rxbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16 *&#160;</td>
          <td class="paramname"><em>rxbits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>norestime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>followCmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>waitTxIrq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is for generic sending and receiving gen2 commands through the FIFO. The parameters are: </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd,:</td><td>One of the AS3993_CMD_* commands wich transmits something. </td></tr>
    <tr><td class="paramname">txbuf,:</td><td>buffer to be tranmitted. </td></tr>
    <tr><td class="paramname">txbits,:</td><td>the size of txbuf in bits </td></tr>
    <tr><td class="paramname">rxbuf,:</td><td>a buffer getting the response of the tag </td></tr>
    <tr><td class="paramname">rxbits,:</td><td>the maximum number of expected rx bits (size of rxbuf in bits) The value will be written to rxlength register. If 0 rxlength is automatically calculated by the reader and no boundary check for rxbuf is done. </td></tr>
    <tr><td class="paramname">norestime,:</td><td>value for register AS3993_REG_RXNORESPONSEWAITTIME 0xff means 26 ms. Other values are much shorter. </td></tr>
    <tr><td class="paramname">followCmd,:</td><td>Command to be sent after rxdone interrupt but before emptying FIFO. This is needed for not violating T2 timing requirement. </td></tr>
    <tr><td class="paramname">waitTxIrq,:</td><td>If 0 tx irq will not be handled after transmitting command, otherwise FW will wait for Tx irq after transmitting command.</td></tr>
  </table>
  </dd>
</dl>
<p>Certain values may be set to 0/NULL thus changing the behavior. Examples:</p>
<ul>
<li>as3993TxRxGen2Bytes(AS3993_CMD_TRANSMCRCEHEAD, buf_, 50, buf_, &amp;rxbits, 0xff, 0) with rxbits=33 can be used to send WRITE command and retrieve after max 20ms a reply expecting a header.</li>
<li>as3993TxRxGen2Bytes(AS3993_CMD_TRANSMCRC, buf_, len, NULL, &amp;rxbits, 0, 0) with rxbits=0 is a transmit-only used for sending SELECT. With *rxbits==0 and rxbuf==NULL RX will be turned off immediately after TX-done interrupt</li>
<li>as3993TxRxGen2Bytes(AS3993_CMD_QUERY,buf_,16,tag-&gt;rn16,&amp;rxlen,gen2IntConfig.no_resp_time,AS3993_CMD_ACK) with rxlen==16 sends QUERY command, waits for tx-done, then waits for rx-done, then sends ACK command and only as the last step reads RN16 from FIFO</li>
<li>as3993TxRxGen2Bytes(0,buf_,0,buf_,&amp;rxlen,gen2IntConfig.no_resp_time,fast?0:AS3993_CMD_REQRN) with rxlen==sizeof(buf_)*8 does not send anything (ACK was executed via followCmd as previous example), waits for tx-done, waits for rx-done, sends REQRN, reads EPC from FIFO </li>
</ul>

<p>Definition at line <a class="el" href="as3993_8c_source.html#l01186">1186</a> of file <a class="el" href="as3993_8c_source.html">as3993.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 19 2013 15:32:33 for as3993 Firmware by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
